<template>
    <div class="session__welcome">
        <h3 class="session__subtitle">{{ email }}</h3>
        <svg
            xmlns="http://www.w3.org/2000/svg"
            width="156"
            height="157"
            viewBox="0 0 156 157"
            fill="none"
        >
            <g clip-path="url(#clip0_155_759)">
                <rect
                    y="0.0507812"
                    width="156"
                    height="156"
                    rx="78"
                    fill="#0892B6"
                />
                <path
                    d="M143.5 122.953C143.5 124.918 142.802 127.281 141.591 129.743C140.384 132.198 138.686 134.717 136.728 136.983C134.77 139.25 132.564 141.251 130.349 142.682C128.126 144.118 125.936 144.953 124 144.953C120.219 144.953 117.826 141.721 116.37 137.158C114.928 132.639 114.5 127.073 114.5 122.953C114.5 114.945 120.992 108.453 129 108.453C137.008 108.453 143.5 114.945 143.5 122.953Z"
                    fill="#D9D9D9"
                />
                <path
                    d="M143.5 122.953C143.5 124.918 142.802 127.281 141.591 129.743C140.384 132.198 138.686 134.717 136.728 136.983C134.77 139.25 132.564 141.251 130.349 142.682C128.126 144.118 125.936 144.953 124 144.953C120.219 144.953 117.826 141.721 116.37 137.158C114.928 132.639 114.5 127.073 114.5 122.953C114.5 114.945 120.992 108.453 129 108.453C137.008 108.453 143.5 114.945 143.5 122.953Z"
                    fill="url(#paint0_radial_155_759)"
                    fill-opacity="0.2"
                />
                <path
                    d="M143.5 122.953C143.5 124.918 142.802 127.281 141.591 129.743C140.384 132.198 138.686 134.717 136.728 136.983C134.77 139.25 132.564 141.251 130.349 142.682C128.126 144.118 125.936 144.953 124 144.953C120.219 144.953 117.826 141.721 116.37 137.158C114.928 132.639 114.5 127.073 114.5 122.953C114.5 114.945 120.992 108.453 129 108.453C137.008 108.453 143.5 114.945 143.5 122.953Z"
                    stroke="black"
                />
                <path
                    d="M13.5 122.953C13.5 124.918 14.1983 127.281 15.4087 129.743C16.6156 132.198 18.3141 134.717 20.2718 136.983C22.23 139.25 24.4361 141.251 26.6514 142.682C28.8739 144.118 31.0638 144.953 33 144.953C36.7811 144.953 39.1742 141.721 40.6303 137.158C42.0721 132.639 42.5 127.073 42.5 122.953C42.5 114.945 36.0081 108.453 28 108.453C19.9919 108.453 13.5 114.945 13.5 122.953Z"
                    fill="#D9D9D9"
                />
                <path
                    d="M13.5 122.953C13.5 124.918 14.1983 127.281 15.4087 129.743C16.6156 132.198 18.3141 134.717 20.2718 136.983C22.23 139.25 24.4361 141.251 26.6514 142.682C28.8739 144.118 31.0638 144.953 33 144.953C36.7811 144.953 39.1742 141.721 40.6303 137.158C42.0721 132.639 42.5 127.073 42.5 122.953C42.5 114.945 36.0081 108.453 28 108.453C19.9919 108.453 13.5 114.945 13.5 122.953Z"
                    fill="url(#paint1_radial_155_759)"
                    fill-opacity="0.2"
                />
                <path
                    d="M13.5 122.953C13.5 124.918 14.1983 127.281 15.4087 129.743C16.6156 132.198 18.3141 134.717 20.2718 136.983C22.23 139.25 24.4361 141.251 26.6514 142.682C28.8739 144.118 31.0638 144.953 33 144.953C36.7811 144.953 39.1742 141.721 40.6303 137.158C42.0721 132.639 42.5 127.073 42.5 122.953C42.5 114.945 36.0081 108.453 28 108.453C19.9919 108.453 13.5 114.945 13.5 122.953Z"
                    stroke="black"
                />
                <path
                    d="M123.5 109.551C123.5 114.489 122.401 116.922 120.559 118.009C119.62 118.563 118.43 118.808 116.96 118.801C115.489 118.795 113.773 118.537 111.813 118.118C109.914 117.712 107.796 117.156 105.476 116.547C98.2644 114.653 89.1043 112.248 78.5 112.248C67.8958 112.248 58.7357 114.653 51.5241 116.547C49.2044 117.156 47.0863 117.712 45.1866 118.118C43.2265 118.537 41.5114 118.795 40.0403 118.801C38.5698 118.808 37.3796 118.563 36.4415 118.009C34.5995 116.922 33.5 114.489 33.5 109.551C33.5 99.7258 37.8617 85.7979 45.7039 74.3272C53.5465 62.8558 64.7888 53.9531 78.5 53.9531C92.2112 53.9531 103.453 62.8558 111.296 74.3272C119.138 85.7979 123.5 99.7258 123.5 109.551Z"
                    fill="#575757"
                    stroke="black"
                />
                <path
                    d="M66.9031 62.2919C66.5767 61.2559 65.9492 60.4828 65.4638 59.8848C65.3837 59.7862 65.3076 59.6923 65.2372 59.6028C64.9746 59.2687 64.8068 59.0157 64.7314 58.7859C64.6665 58.5882 64.6664 58.3978 64.7926 58.1524C64.9326 57.8803 65.2361 57.5278 65.8318 57.0707C66.4221 56.6178 67.2657 56.0873 68.4413 55.4487C70.7888 54.1734 74.4056 52.496 79.8463 50.17C86.47 48.0893 93.9641 48.3525 99.9833 49.6873C102.994 50.355 105.616 51.2865 107.558 52.3111C108.53 52.8235 109.32 53.3529 109.902 53.8749C110.489 54.4014 110.833 54.8925 110.968 55.3219C111.13 55.8356 111.313 56.3278 111.485 56.7905C111.502 56.8352 111.519 56.8796 111.535 56.9236C111.723 57.4305 111.894 57.8988 112.019 58.3498C112.27 59.248 112.324 60.0137 112.006 60.7556C111.684 61.5081 110.941 62.3265 109.393 63.2303C107.848 64.1328 105.55 65.0917 102.197 66.1481C95.5587 68.2396 87.0062 68.2972 79.9253 67.2756C76.3884 66.7654 73.2439 65.9894 70.9098 65.0779C69.7416 64.6218 68.7933 64.1382 68.1038 63.6482C67.4031 63.1504 67.0275 62.6869 66.9031 62.2919Z"
                    fill="#575757"
                    stroke="black"
                />
                <path
                    d="M64.527 67.3235C63.3493 62.5155 54.1808 60.8084 74.9715 53.1248C87.7626 49.9917 101.171 53.1517 102.349 57.9596C103.527 62.7676 106.26 66.0744 93.4686 69.2076C80.6774 72.3407 65.7047 72.1315 64.527 67.3235Z"
                    fill="#575757"
                />
                <path
                    d="M128.5 129.453C128.5 154.263 106.384 174.453 79 174.453C51.6165 174.453 29.5 154.263 29.5 129.453C29.5 104.644 51.6165 84.4531 79 84.4531C106.384 84.4531 128.5 104.644 128.5 129.453Z"
                    fill="#D9D9D9"
                />
                <path
                    d="M128.5 129.453C128.5 154.263 106.384 174.453 79 174.453C51.6165 174.453 29.5 154.263 29.5 129.453C29.5 104.644 51.6165 84.4531 79 84.4531C106.384 84.4531 128.5 104.644 128.5 129.453Z"
                    fill="url(#paint2_radial_155_759)"
                    fill-opacity="0.2"
                />
                <path
                    d="M128.5 129.453C128.5 154.263 106.384 174.453 79 174.453C51.6165 174.453 29.5 154.263 29.5 129.453C29.5 104.644 51.6165 84.4531 79 84.4531C106.384 84.4531 128.5 104.644 128.5 129.453Z"
                    stroke="black"
                />
                <path
                    d="M111.5 124.453C111.5 125.838 111.219 126.799 110.76 127.479C110.305 128.155 109.638 128.605 108.763 128.905C107.879 129.207 106.802 129.348 105.562 129.41C104.558 129.46 103.473 129.457 102.321 129.454C102.051 129.454 101.777 129.453 101.5 129.453C101.223 129.453 100.949 129.454 100.679 129.454C99.5269 129.457 98.4424 129.46 97.4378 129.41C96.1978 129.348 95.1214 129.207 94.2372 128.905C93.3619 128.605 92.6952 128.155 92.2396 127.479C91.7807 126.799 91.5 125.838 91.5 124.453C91.5 118.93 95.9772 114.453 101.5 114.453C107.023 114.453 111.5 118.93 111.5 124.453Z"
                    fill="#393939"
                />
                <path
                    d="M111.5 124.453C111.5 125.838 111.219 126.799 110.76 127.479C110.305 128.155 109.638 128.605 108.763 128.905C107.879 129.207 106.802 129.348 105.562 129.41C104.558 129.46 103.473 129.457 102.321 129.454C102.051 129.454 101.777 129.453 101.5 129.453C101.223 129.453 100.949 129.454 100.679 129.454C99.5269 129.457 98.4424 129.46 97.4378 129.41C96.1978 129.348 95.1214 129.207 94.2372 128.905C93.3619 128.605 92.6952 128.155 92.2396 127.479C91.7807 126.799 91.5 125.838 91.5 124.453C91.5 118.93 95.9772 114.453 101.5 114.453C107.023 114.453 111.5 118.93 111.5 124.453Z"
                    stroke="url(#paint3_radial_155_759)"
                />
                <path
                    d="M111.5 124.453C111.5 125.838 111.219 126.799 110.76 127.479C110.305 128.155 109.638 128.605 108.763 128.905C107.879 129.207 106.802 129.348 105.562 129.41C104.558 129.46 103.473 129.457 102.321 129.454C102.051 129.454 101.777 129.453 101.5 129.453C101.223 129.453 100.949 129.454 100.679 129.454C99.5269 129.457 98.4424 129.46 97.4378 129.41C96.1978 129.348 95.1214 129.207 94.2372 128.905C93.3619 128.605 92.6952 128.155 92.2396 127.479C91.7807 126.799 91.5 125.838 91.5 124.453C91.5 118.93 95.9772 114.453 101.5 114.453C107.023 114.453 111.5 118.93 111.5 124.453Z"
                    stroke="url(#paint4_linear_155_759)"
                    stroke-opacity="0.85"
                />
                <path
                    d="M44.5 124.453C44.5 125.837 44.7802 126.836 45.2469 127.568C45.7111 128.297 46.3882 128.807 47.2642 129.165C49.0556 129.896 51.5732 129.953 54.5 129.953C57.4268 129.953 59.9444 129.896 61.7358 129.165C62.6118 128.807 63.2889 128.297 63.7531 127.568C64.2198 126.836 64.5 125.837 64.5 124.453C64.5 118.93 60.0228 114.453 54.5 114.453C48.9772 114.453 44.5 118.93 44.5 124.453Z"
                    fill="#393939"
                />
                <path
                    d="M44.5 124.453C44.5 125.837 44.7802 126.836 45.2469 127.568C45.7111 128.297 46.3882 128.807 47.2642 129.165C49.0556 129.896 51.5732 129.953 54.5 129.953C57.4268 129.953 59.9444 129.896 61.7358 129.165C62.6118 128.807 63.2889 128.297 63.7531 127.568C64.2198 126.836 64.5 125.837 64.5 124.453C64.5 118.93 60.0228 114.453 54.5 114.453C48.9772 114.453 44.5 118.93 44.5 124.453Z"
                    stroke="url(#paint5_radial_155_759)"
                />
                <path
                    d="M44.5 124.453C44.5 125.837 44.7802 126.836 45.2469 127.568C45.7111 128.297 46.3882 128.807 47.2642 129.165C49.0556 129.896 51.5732 129.953 54.5 129.953C57.4268 129.953 59.9444 129.896 61.7358 129.165C62.6118 128.807 63.2889 128.297 63.7531 127.568C64.2198 126.836 64.5 125.837 64.5 124.453C64.5 118.93 60.0228 114.453 54.5 114.453C48.9772 114.453 44.5 118.93 44.5 124.453Z"
                    stroke="url(#paint6_linear_155_759)"
                    stroke-opacity="0.85"
                />
                <rect
                    x="37.5"
                    y="115.551"
                    width="35"
                    height="27"
                    rx="8.5"
                    stroke="black"
                />
                <rect
                    x="83.5"
                    y="115.551"
                    width="35"
                    height="27"
                    rx="8.5"
                    stroke="black"
                />
                <line
                    x1="73"
                    y1="128.551"
                    x2="83"
                    y2="128.551"
                    stroke="black"
                />
            </g>
            <rect
                x="0.5"
                y="0.550781"
                width="155"
                height="155"
                rx="77.5"
                stroke="#110300"
            />
            <defs>
                <radialGradient
                    id="paint0_radial_155_759"
                    cx="0"
                    cy="0"
                    r="1"
                    gradientUnits="userSpaceOnUse"
                    gradientTransform="translate(129 126.703) rotate(90) scale(18.75 15)"
                >
                    <stop offset="0.35707" stop-color="#1BC1E6" />
                    <stop offset="1" stop-opacity="0" />
                </radialGradient>
                <radialGradient
                    id="paint1_radial_155_759"
                    cx="0"
                    cy="0"
                    r="1"
                    gradientUnits="userSpaceOnUse"
                    gradientTransform="translate(28 126.703) rotate(90) scale(18.75 15)"
                >
                    <stop offset="0.35707" stop-color="#1BC1E6" />
                    <stop offset="1" stop-opacity="0" />
                </radialGradient>
                <radialGradient
                    id="paint2_radial_155_759"
                    cx="0"
                    cy="0"
                    r="1"
                    gradientUnits="userSpaceOnUse"
                    gradientTransform="translate(79 166.308) rotate(-90) scale(25.48 60.1886)"
                >
                    <stop stop-color="#1BC1E6" />
                    <stop offset="1" stop-color="#372626" stop-opacity="0" />
                </radialGradient>
                <radialGradient
                    id="paint3_radial_155_759"
                    cx="0"
                    cy="0"
                    r="1"
                    gradientUnits="userSpaceOnUse"
                    gradientTransform="translate(99.75 118.328) rotate(83.991) scale(16.7169)"
                >
                    <stop />
                    <stop offset="1" stop-opacity="0" />
                </radialGradient>
                <linearGradient
                    id="paint4_linear_155_759"
                    x1="112"
                    y1="124.453"
                    x2="101.5"
                    y2="134.953"
                    gradientUnits="userSpaceOnUse"
                >
                    <stop stop-color="#D9D9D9" />
                    <stop offset="1" stop-color="#D9D9D9" stop-opacity="0" />
                </linearGradient>
                <radialGradient
                    id="paint5_radial_155_759"
                    cx="0"
                    cy="0"
                    r="1"
                    gradientUnits="userSpaceOnUse"
                    gradientTransform="translate(56.25 118.328) rotate(96.009) scale(16.7169 16.7169)"
                >
                    <stop />
                    <stop offset="1" stop-opacity="0" />
                </radialGradient>
                <linearGradient
                    id="paint6_linear_155_759"
                    x1="44"
                    y1="124.453"
                    x2="54.5"
                    y2="134.953"
                    gradientUnits="userSpaceOnUse"
                >
                    <stop stop-color="#D9D9D9" />
                    <stop offset="1" stop-color="#D9D9D9" stop-opacity="0" />
                </linearGradient>
                <clipPath id="clip0_155_759">
                    <rect
                        y="0.0507812"
                        width="156"
                        height="156"
                        rx="78"
                        fill="white"
                    />
                </clipPath>
            </defs>
        </svg>
        <router-link to="/profiles" class="btn"> Start </router-link>
        <p>
            Not you?
            <span class="link" @click="logOut()">Logout</span>
        </p>
    </div>
</template>
<script>
import { mapState, mapMutations } from "vuex";
import apiService from "@/services/api.js";

export default {
    name: "TheWelcome",
    computed: {
        ...mapState(["isLogged", "user"]),
        email() {
            return this.isLogged && this.$store.state.user
                ? this.$store.state.user.email
                : "Farmer?";
        },
    },
    data() {
        return {
            apiService: null,
        };
    },
    created() {
        this.apiService = new apiService();
    },
    methods: {
        ...mapMutations(["changeLoggedState", "changeUser"]),
        async logOut() {
            try {
                const response = await this.apiService.logOut();
                localStorage.removeItem("token");
                this.changeLoggedState(false);
                console.log(response);
                location.reload(); // Refresh the page
            } catch (error) {
                if (error.response && error.response.status === 401) {
                    // In case the token is invalid
                    localStorage.removeItem("token");
                    this.changeLoggedState(false);
                    console.log("Unauthorized");
                    location.reload(); // Refresh the page
                }
                console.log(error);
            }
        },
    },
};
</script>
